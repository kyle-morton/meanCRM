<div ng-if="main.user.role === 'admin'">
	

	<div class="page-header">
		<h1>
			Users 
			<a href="/users/create" class="btn btn-default">
				<span class="glyphicon glyphicon-plus"></span> 
				New User
			</a>
		</h1>
	
	</div>
	
	<div class="jumbotron text-center" ng-show="user.processing">
		<span class="glyphicon glyphicon-repeat spinner"></span>
		<p>Loading Users...</p>
	</div>
	
	
	<table class="table table-bordered table-striped" ng-show="user.users" >
		<thead>
			<tr>
				<!--<th>_id</th>-->
				<th class="text-center">Name</th>
				<th class="text-center">Username</th>
				<th class="text-center">Role</th>
				<th class="col-sm-2 text-center"></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="person in user.users">
				<!--<td>{{ person._id }}</td>-->
				<td class="text-center">{{ person.name }}</td>
				<td class="text-center">{{ person.username }}</td>
				<td class="text-center">{{ person.role }}</td>
				<td class="col-sm-2 text-center">
					<a ng-href="/users/{{ person._id }}" class="btn btn-primary">Edit</a>
					<!-- Only Display Delete if not-currently logged in user -->
						<a href="#" ng-click="user.deleteUser(person._id)" 
						class="btn btn-danger" ng-if="main.user.id != person._id">Delete</a>
				</td>
			</tr>
		</tbody>
	</table>

</div>

<div ng-controller="postController as postCtlr">

	<div class="page-header">

		<h1>Posts
			<a class="btn btn-default" data-target="#postModal" data-toggle="modal">
				<span class="glyphicon glyphicon-plus"></span> 
				New Post
			</a>
		</h1>
	</div>	
	<div class="jumbotron text-center" ng-show="postCtlr.processingPosts">
		<span class="glyphicon glyphicon-repeat spinner"></span>
		<p>Loading Posts...</p>
	</div>
	
	<table class="table table-bordered table-striped" ng-show="postCtlr.posts">
		<thead>
			<tr>
				<th class="text-center">Subject</th>
				<th class="text-center">Body</th>
				<th class="text-center">Author</th>
				<th class="text-center">Time</th>
				<th class="text-center">Status</th>
				<th class="col-sm-1 text-center"></th>
			</tr>
		</thead>
		<tbody>
			<tr ng-repeat="post in postCtlr.posts" >
			<!--ng-if="post.read === false">-->
				<td class="text-center">{{ post.subject }}</td>
				<td class="text-center">{{ post.body }}</td>
				<td class="text-center">{{ post.username }}</td>
				<td class="text-center">{{ post.time | date:'medium' }}</td>
				<td class="text-center">
					<span ng-if="post.read === true"> Read </span>
					<span ng-if="post.read === false"> New </span> 
				</td>
				<td class="col-sm-1 text-center">
					<a class="anchorStyle" title="Update Status"
					ng-click="postCtlr.updatePostStatus(post._id)" ng-show="main.user.id === post.userid">
						<i class="fa fa-envelope fa-lg" ng-show="post.read === false"></i>
						<i class="fa fa-envelope-o fa-lg" ng-show="post.read === true"></i>
					</a>
					<a class="anchorStyle" title="Edit Post" ng-click="postCtlr.openEditModal(post)" 
					ng-show="main.user.id === post.userid">
						<i class="fa fa-pencil fa-lg"></i>
					</a>
				</td>
			</tr>
		</tbody>
	</table>

	<!-- Modal -->
	<div id="postModal" class="modal fade" role="dialog">
		<div class="modal-dialog">
		
			<!-- Modal content-->
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal">&times;</button>
					<h4 class="modal-title">Create User Post</h4>
				</div>
				<div class="modal-body">
						<div class="form-group">
							<label for="exampleInputEmail1">Subject</label>
							<input type="text" class="form-control" id="postSubject" 
								ng-model="postCtlr.postData.subject" placeholder="subject">
						</div>
						<div class="form-group">
							<label for="postBody">Post Body</label>
							<textarea rows="2" class="form-control" id="postBody"
							ng-model="postCtlr.postData.body" placeholder="body">
							</textarea>
	
						</div>
				</div>
				<div class="modal-footer text-align">
					<!--<button type="button" class="btn btn-default" data-dismiss="modal">Close</button>-->
					<a href="#" ng-click="postCtlr.createPost()" 
							class="btn btn-primary">Save Post</a>
				</div>
			</div>
		
		</div>
	</div>

</div>

